package net.loyin.model.sys;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import net.loyin.jfinal.anatation.TableBind;

import com.jfinal.plugin.activerecord.Db;
import com.jfinal.plugin.activerecord.Model;
import com.jfinal.plugin.activerecord.Record;
/***
 * 系统参数配置
 * @author 刘声凤
 *  2012-9-4 上午10:39:04
 */
@TableBind(name="sp_parame",pk="ID")
public class Parame extends Model<Parame> {
	public static String tableName="sp.parame";
	private static final long serialVersionUID = 8550674271875901835L;
	public static final Parame dao=new Parame();
	/**通过类型查找 参数名称 + 值*/
	public List<Record> qry(String lx){
		return Db.find("select t1.CNAME,t1.CNAME val from "+tableName+" t1 where t1.lx=? order by t1.sortnum asc",lx);
	}
	/**通过type查找*/
	public List<Map<String,String>> findByType(int type){
		List<Record> list=Db.find("select t1.CNAME,t1.CNAME val from "+tableName+" t1  where t1.lx=? order by t1.sortnum asc",type);
		if(list==null||list.isEmpty()){
			return null;
		}
		List<Map<String,String>> l=new ArrayList<Map<String,String>>();
		for(Record r:list){
			Map<String,String>m=new HashMap<String,String>();
			m.put("v",r.getStr("val"));
			m.put("t",r.getStr("cname"));
			list.add(r);
		}
		return l;
	}
}
