package net.loyin.util.wechat;

import java.text.SimpleDateFormat;
import java.util.Date;

import net.loyin.util.wechat.bean.Message;

public class XmlUtil {
	/** 验证总报文 */
	public static String getXml(Message message, Date time, int random, String phone, String SHA, String MD5, String sendData) {
		String Username = message.getUsername();
		String Password = message.getPassword();
		String BusCode = message.getBusCode();
		String ServiceCode = message.getServiceCode();
		String Version = message.getVersion();
		String AppID = message.getAppID();
		String PartnerCode = message.getPartnerCode();
		String ReqCode = Username + new SimpleDateFormat("yyyyMMddSSS").format(time) + random + 100000;
		String ReqTime = new SimpleDateFormat("yyyy:MM:dd:hh:mm:ss:SSS").format(time);
		String AccountID = phone;
		String AccountType = message.getAccountType();
		String CityCode = message.getCityCode();
		String ReqType = message.getReqType();
		String ReqCode2 = message.getReqCode2();
		String SrcOrgID = message.getSrcOrgID();
		String SrcSysSign = message.getSrcSysSign();
		String msge = "<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\">\r\n" + "<soap:Header xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\r\n"
				+ "<wsse:Security soap:mustUnderstand=\"1\" xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\">\r\n"
				+ "<wsse:UsernameToken wsu:Id=\"unt_VzWLJnwKaHlopVyN\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">\r\n" + "<wsse:Username>"
				+ Username
				+ "</wsse:Username>\r\n"
				+ "<wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\">"
				+ Password
				+ "</wsse:Password>\r\n"
				+ "</wsse:UsernameToken>\r\n"
				+ "</wsse:Security>\r\n"
				+ "</soap:Header>\r\n"
				+ "<soapenv:Body>\r\n"
				+ "<mbos:TeleEsbRoot xmlns:esb=\"mboss/esb\" xmlns:mbos=\"mboss-esb\">\r\n"
				+ "<SecurityHeader>\r\n"
				+ "<SHA>"
				+ SHA
				+ "</SHA>\r\n"
				+ "</SecurityHeader>\r\n"
				+ "<TradeHeader>\r\n"
				+ "<BusCode>"
				+ BusCode
				+ "</BusCode>\r\n"
				+ "<ServiceCode>"
				+ ServiceCode
				+ "</ServiceCode>\r\n"
				+ "<Version>"
				+ Version
				+ "</Version>\r\n"
				+ "<AppID>"
				+ AppID
				+ "</AppID>\r\n"
				+ "<PartnerCode>"
				+ PartnerCode
				+ "</PartnerCode>\r\n"
				+ "<MD5>"
				+ MD5
				+ "</MD5>\r\n"
				+ "<ReqCode>"
				+ ReqCode
				+ "</ReqCode>\r\n"
				+ "<ReqTime>"
				+ ReqTime
				+ "</ReqTime>\r\n"
				+ "<DigitalSign/>\r\n"
				+ "<Request>\r\n"
				+ "<AccountID>"
				+ AccountID
				+ "</AccountID>\r\n"
				+ "<AccountType>"
				+ AccountType
				+ "</AccountType>\r\n"
				+ "<CityCode>"
				+ CityCode
				+ "</CityCode>\r\n"
				+ "<UserToken/>\r\n"
				+ "<SmsCode/>\r\n"
				+ "<ReqType>"
				+ ReqType
				+ "</ReqType>\r\n"
				+ "<ReqCode>"
				+ ReqCode2
				+ "</ReqCode>\r\n"
				+ "</Request>\r\n"
				+ "<PartnerInfo>\r\n"
				+ "<SrcOrgID>"
				+ SrcOrgID
				+ "</SrcOrgID>\r\n"
				+ "<SrcSysID/>\r\n"
				+ "<SrcSysSign>"
				+ SrcSysSign
				+ "</SrcSysSign>\r\n"
				+ "</PartnerInfo>\r\n"
				+ "</TradeHeader>\r\n"
				+ "<TradeData>\r\n"
				+ "<sendData><![CDATA[" + sendData + "]]></sendData>\r\n" + "</TradeData>\r\n" + "</mbos:TeleEsbRoot>\r\n" + "</soapenv:Body>\r\n" + "</soapenv:Envelope>";
		return msge;
	}

	/**
	 * 交易报文信息
	 * 
	 * @param message
	 *            设置信息
	 * @param time
	 *            时间
	 * @param random
	 *            随机数
	 * @param phone
	 *            手机号码
	 * @param SHA
	 * @param MD5
	 * @param sesCode
	 *            验证码
	 * @return
	 */
	public static String getXmlByCBSSVC(Message message, Date time, int random, String phone, String SHA, String MD5, String sesCode) {
		String Username = message.getUsername();
		String Password = message.getPassword();
		String BusCode = message.getBusCode();
		String ServiceCode = message.getTransServiceCode();
		String Version = message.getVersion();
		String AppID = message.getAppID();
		String PartnerCode = message.getPartnerCode();
		String ReqCode = Username + new SimpleDateFormat("yyyyMMddSSS").format(time) + random + 100000;
		String ReqTime = new SimpleDateFormat("yyyy:MM:dd:hh:mm:ss:SSS").format(time);
		String AccountID = phone;
		String AccountType = message.getAccountType();
		String CityCode = message.getCityCode();
		String ReqType = message.getReqType();
		String ReqCode2 = message.getReqCode2();
		String SrcOrgID = message.getSrcOrgID();
		String SrcSysSign = message.getSrcSysSign();
		String sendData = message.getSendData();
		String msge = "<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\">\r\n" + "<soap:Header xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\r\n"
				+ "<wsse:Security soap:mustUnderstand=\"1\" xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\">\r\n"
				+ "<wsse:UsernameToken wsu:Id=\"unt_VzWLJnwKaHlopVyN\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">\r\n" + "<wsse:Username>"
				+ Username
				+ "</wsse:Username>\r\n"
				+ "<wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\">"
				+ Password
				+ "</wsse:Password>\r\n"
				+ "</wsse:UsernameToken>\r\n"
				+ "</wsse:Security>\r\n"
				+ "</soap:Header>\r\n"
				+ "<soapenv:Body>\r\n"
				+ "<mbos:TeleEsbRoot  xmlns:esb=\"mboss/esb\" xmlns:mbos=\"mboss-esb\">\r\n"
				+ "<SecurityHeader>\r\n"
				+ "<SHA>"
				+ SHA
				+ "</SHA>\r\n"
				+ "</SecurityHeader>\r\n"
				+ "<TradeHeader>\r\n"
				+ "<BusCode>"
				+ BusCode
				+ "</BusCode>\r\n"
				+ "<ServiceCode>"
				+ ServiceCode
				+ "</ServiceCode>\r\n"
				+ "<Version>"
				+ Version
				+ "</Version>\r\n"
				+ "<AppID>"
				+ AppID
				+ "</AppID>\r\n"
				+ "<PartnerCode>"
				+ PartnerCode
				+ "</PartnerCode>\r\n"
				+ "<MD5>"
				+ MD5
				+ "</MD5>\r\n"
				+ "<ReqCode>"
				+ ReqCode
				+ "</ReqCode>\r\n"
				+ "<ReqTime>"
				+ ReqTime
				+ "</ReqTime>\r\n"
				+ "<DigitalSign/>\r\n"
				+ "<Request>\r\n"
				+ "<AccountID>"
				+ AccountID
				+ "</AccountID>\r\n"
				+ "<AccountType>"
				+ AccountType
				+ "</AccountType>\r\n"
				+ "<CityCode>"
				+ CityCode
				+ "</CityCode>\r\n"
				+ "<UserToken>"
				+ sesCode
				+ "</UserToken>\r\n"
				+ "<SmsCode>"
				+ sesCode
				+ "</SmsCode>\r\n"
				+ "<ReqType>"
				+ ReqType
				+ "</ReqType>\r\n"
				+ "<ReqCode>"
				+ ReqCode2
				+ "</ReqCode>\r\n"
				+ "</Request>\r\n"
				+ "<PartnerInfo>\r\n"
				+ "<SrcOrgID>"
				+ SrcOrgID
				+ "</SrcOrgID>\r\n"
				+ "<SrcSysID/>\r\n"
				+ "<SrcSysSign>"
				+ SrcSysSign
				+ "</SrcSysSign>\r\n"
				+ "</PartnerInfo>\r\n"
				+ "</TradeHeader>\r\n" + "<TradeData>\r\n" + "<sendData><![CDATA[" + sendData + "]]></sendData>\r\n" + "</TradeData>\r\n" + "</mbos:TeleEsbRoot>\r\n" + "</soapenv:Body>\r\n" + "</soapenv:Envelope>";
		return msge;
	}
}
