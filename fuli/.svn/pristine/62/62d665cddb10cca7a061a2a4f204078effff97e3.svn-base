SET SESSION FOREIGN_KEY_CHECKS=0;

/* Drop Tables */

DROP TABLE SP_ARTICLE;
DROP TABLE SP_ARTCATE;
DROP TABLE SP_JSRECORD;
DROP TABLE SP_MOBILEAPP;
DROP TABLE SP_WXINCOME;
DROP TABLE SP_WX_ORDER;




/* Create Tables */

CREATE TABLE SP_ARTCATE
(
	ID BIGINT NOT NULL AUTO_INCREMENT COMMENT 'id',
	NAME VARCHAR(20) NOT NULL COMMENT '名称',
	PID BIGINT DEFAULT 0 COMMENT 'PID',
	PRIMARY KEY (ID)
) COMMENT = '文章类别';


CREATE TABLE SP_ARTICLE
(
	ID BIGINT NOT NULL AUTO_INCREMENT COMMENT 'id',
	TITLE VARCHAR(100) NOT NULL COMMENT '标题',
	CONTENT LONGTEXT NOT NULL COMMENT '内容',
	CATEID BIGINT NOT NULL COMMENT '类别',
	CTIME DATETIME NOT NULL COMMENT '创建时间',
	PRIMARY KEY (ID)
) COMMENT = '文章';


CREATE TABLE SP_JSRECORD
(
	ID BIGINT NOT NULL AUTO_INCREMENT COMMENT 'id',
	UID BIGINT NOT NULL COMMENT '用户ID',
	CTIME DATETIME NOT NULL COMMENT '创建时间',
	AMT DECIMAL(10,2) NOT NULL COMMENT '金额',
	PRIMARY KEY (ID)
) COMMENT = '结算记录';


CREATE TABLE SP_MOBILEAPP
(
	ID BIGINT NOT NULL AUTO_INCREMENT COMMENT 'id',
	NAME VARCHAR(20) NOT NULL COMMENT '名称',
	IMG VARCHAR(100) NOT NULL COMMENT '图标',
	LB VARCHAR(10) NOT NULL COMMENT '类别',
	RQ INT DEFAULT 0 NOT NULL COMMENT '人气',
	LCS INT DEFAULT 0 NOT NULL COMMENT '浏览次数',
	URL VARCHAR(200) NOT NULL COMMENT '链接',
	PRIMARY KEY (ID)
) COMMENT = '移动手机APP采用外链';


CREATE TABLE SP_WXINCOME
(
	ID BIGINT NOT NULL AUTO_INCREMENT COMMENT 'id',
	UID BIGINT NOT NULL COMMENT '用户ID',
	AMT DECIMAL(10,2) NOT NULL COMMENT '金额',
	-- 0:返利
	-- 1:酒帮奖金
	TYP SMALLINT DEFAULT 0 NOT NULL COMMENT '类型',
	CTIME DATETIME NOT NULL COMMENT '创建时间',
	-- 记录满8计入标志:1
	STAT SMALLINT DEFAULT 0 NOT NULL COMMENT '状态',
	OPENID VARCHAR(50) NOT NULL COMMENT 'openid',
	JBOPENID VARCHAR(50) COMMENT 'jbopenid',
	PRIMARY KEY (ID)
) COMMENT = '用户收益表';


CREATE TABLE SP_WX_ORDER
(
	ID BIGINT NOT NULL AUTO_INCREMENT COMMENT 'id',
	ORDER_ID VARCHAR(50) UNIQUE COMMENT '订单号',
	ORDER_STATUS VARCHAR(50) COMMENT '订单状态',
	ORDER_TOTAL_PRICE DECIMAL(0,0) COMMENT '订单总价格(单位 : 分)',
	ORDER_CREATE_TIME DATETIME COMMENT '订单创建时间',
	ORDER_EXPRESS_PRICE DECIMAL(0,0) COMMENT '订单运费价格(单位 : 分)',
	BUYER_OPENID VARCHAR(50) COMMENT '买家微信OPENID',
	BUYER_NICK VARCHAR(50) COMMENT '买家微信昵称',
	RECEIVER_NAME VARCHAR(50) COMMENT '收货人姓名',
	RECEIVER_PROVINCE VARCHAR(50) COMMENT '收货地址省份',
	RECEIVER_CITY VARCHAR(50) COMMENT '收货地址城市',
	RECEIVER_ADDRESS VARCHAR(50) COMMENT '收货详细地址',
	RECEIVER_MOBILE VARCHAR(50) COMMENT '收货人移动电话',
	RECEIVER_PHONE VARCHAR(50) COMMENT '收货人固定电话',
	PRODUCT_ID VARCHAR(50) COMMENT '商品ID',
	PRODUCT_NAME VARCHAR(50) COMMENT '商品名称',
	PRODUCT_PRICE DECIMAL(0,0) COMMENT '商品价格(单位 : 分)',
	PRODUCT_SKU VARCHAR(50) COMMENT '商品SKU',
	PRODUCT_COUNT SMALLINT COMMENT '商品个数',
	PRODUCT_IMG TEXT COMMENT '商品图片',
	DELIVERY_ID VARCHAR(50) COMMENT '运单ID',
	DELIVERY_COMPANY VARCHAR(50) COMMENT '物流公司编码',
	TRANS_ID VARCHAR(50) COMMENT '交易ID',
	PRIMARY KEY (ID)
) COMMENT = '微信小店订单';



/* Create Foreign Keys */

ALTER TABLE SP_ARTICLE
	ADD FOREIGN KEY (CATEID)
	REFERENCES SP_ARTCATE (ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;



